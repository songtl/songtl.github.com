---
layout: post
title: STP生成树协议选举过程
categories: Network
tags: [STP, Cisco, 生成树]
---

STP选举过程涉及根网桥（root brige）、根端口（root port）、指定端口（designated port）、阻塞端口（block port），最近在网上看到了CISCO发布的一个介绍STP协议选举过程的FLASH，比较易于理解。因此转过来收藏  




**总结：**

**一、根网桥**  
根网桥是根据网桥ID（Brige ID）来选举的，网桥ID由8个字节组成，前2字节为网桥优先级、后 6字节为MAC地址，有且只有一个，选举过程

1、比较网桥优先级  
2、比较MAC地址

**二、根端口**  
每个非根网桥有且只有一个根端口，选举过程

1、比较端口到根网桥的开销  
2、比较发送网桥ID  
3、比较发送端口ID

**三、指定端口**  
每条链路有且只有一个指定端口，根网桥所有端口都是指定端口，选举过程

1、比较端口到根网桥的开销  
2、比较发送网桥ID  
3、比较发送端口ID

**四、阻塞端口**  
除了根端口、指定端口外所有端口都是阻塞端口

网桥优先级取值为0-65535，值越低优先级越高，MAC地址也是低的优于高的，发送端口ID则是F0/1优于F0/2

BPDU开销值取值

Bandwidth|CISCO|H3C
      |    |
10Mbps|100|2000
100Mbps|19|200
1000Mbps|4|20
10gMbps|2|20

日期|时间|距离
    |   |   
2012年10月14日|08:30 ~ 16:30| 35.8 公里

